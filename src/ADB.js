export default class ADB{constructor(a="https://taskio.online"){return this.host=a,this}init=a=>{this.key=a,fetch(`${this.host}/keyFile?key=${this.key}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).catch(a=>{console.warn(a)})};getDatabases=a=>new Promise((b,c)=>{fetch(`${this.host}/databases?password=${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{b(a)}).catch(a=>{c(a)})});getCollections=(a=null)=>new Promise((b,c)=>{let d=null===a?this.key:a;this.key=d,fetch(`${this.host}/collections?key=${d}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(({collections:a})=>{b(a)}).catch(a=>{console.warn("ERROR",a),c(a)})});addCollection=a=>new Promise((b,c)=>{fetch(`${this.host}/addCollection/${a}?key=${this.key}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{b(a)}).catch(a=>{c(a)})});addDatabase=a=>new Promise((b,c)=>{fetch(`${this.host}/addDatabase/${a}`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{b(a)}).catch(a=>{c(a)})});updateCollection=(a,b)=>new Promise((c,d)=>{fetch(`${this.host}/updateCollection/${a}?key=${this.key}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(a=>a.json()).then(a=>{c(a)}).catch(a=>{d(a)})});deleteCollection=a=>new Promise((b,c)=>{fetch(`${this.host}/deleteCollection/${a}?key=${this.key}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{b(a)}).catch(a=>{console.error(a),c(a)})});getItems=a=>new Promise((b,c)=>{fetch(`${this.host}/collection/${a}?key=${this.key}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>{a.json().then(a=>{b(a)}).catch(a=>{c(a)})})});addItem=(a,b)=>new Promise((c,d)=>{fetch(`${this.host}/add/${a}?key=${this.key}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,...{dateCreated:Date.now(),dateUpdated:Date.now()}})}).then(a=>a.json()).then(a=>{c(a)}).catch(a=>{d(a)})});updateItem=(a,b)=>new Promise((c,d)=>{fetch(`${this.host}/update/${a}?key=${this.key}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,...{dateUpdated:Date.now()}})}).then(a=>a.json()).then(a=>{c(a)}).catch(a=>{d(a)})});deleteItem=(a,b)=>new Promise((c,d)=>{fetch(`${this.host}/delete/${a}?key=${this.key}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b})}).then(a=>a.json()).then(a=>{c(a)}).catch(a=>{d(a)})});deleteDatabase=a=>new Promise((b,c)=>{fetch(`${this.host}/deleteDatabase/${a}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{b(a)}).catch(a=>{c(a)})})}
